<!DOCTYPE html>
  <html>
    <head>
      <!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
      <link type="text/css" rel="stylesheet" href="css/style.css"  media="screen,projection"/>

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>

    <body>

      @@MENU@@
      <div class="row">
        <div class="col s12">
          <h5 style="text-align:center;">Publicidad</h5>
        </div>
      </div>

      <div class="row">
        <div class="col s12">
          <ul class="collapsible popout" data-collapsible="accordion">
            @@ADS@@
          </ul>
        </div>
      </div>

      <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
        <a class="btn-floating btn-large waves-effect waves-light red gflores" id="addAds"><i class="material-icons">add</i></a>
      </div>

      <!--MODAL PARA EDITAR PUBLICIDAD-->
      <div id="editAds" class="modal modal-fixed-footer">
        <div class="modal-content">
          <h5 style="text-align:center" id="">Editar publicidad</h5>
          <p style="text-align:center" id="">

            <div class="row">
              <form class="col s12"  enctype="multipart/form-data" method="POST" action="ads.php" id="editAdsForm">
                <input type="hidden" name="editadsid" id="editadsid"/>
                
                <div class="row">
                  <div class="input-field col s12">
                    <input id="descriptionedit" placeholder="" name="descriptionedit" type="text" class="validate">
                    <label for="descriptionedit">Descripci&oacute;n</label>
                  </div>
                </div>

                <div class="row">
                  <div class="file-field input-field col s12">
                    <div class="btn gflores">
                      <span>Imagen peque&ntilde;a (320x80px)</span>
                      <input type="file" id="imagensedit" name="imagensedit">
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text">
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="file-field input-field col s12">
                    <div class="btn gflores">
                      <span>Imagen grande (600x80px)</span>
                      <input type="file" id="imagenledit" name="imagenledit">
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text">
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="input-field col s12">
                    <input placeholder="" id="enlaceedit" type="url" class="validate" name="urledit">
                    <label for="enlaceedit">Enlace</label>
                  </div>
                </div>

              </form>
            </div>

          </p>
        </div>
        <div class="modal-footer">
          <span class="gflores-text" style="text-align:center;font-size:18px;display:none;" id="editAdsError">El formulario contiene errores.</span>
          <a href="#!" class=" waves-effect waves-light btn btn-custom-color1" style="margin-left:10px;" id="btnGuardarAdsEdit">Guardar</a>
          <a href="#!" class="modal-action modal-close waves-effect waves-light btn btn-custom-color1" id="cancelEditAds">Cancelar</a>
        </div>
      </div>

      <!--MODAL PARA AGREGAR NUEVA PUBLICIDAD-->
      <div id="newAds" class="modal modal-fixed-footer">
        <div class="modal-content">
          <h5 style="text-align:center" id="">Nueva publicidad</h5>
          <p style="text-align:center" id="">

            <div class="row">
              <form class="col s12"  enctype="multipart/form-data" method="POST" action="ads.php" id="newAdsForm">

                <div class="row">
                  <div class="input-field col s12">
                    <input id="description" name="description" type="text" class="validate">
                    <label for="description">Descripci&oacute;n</label>
                  </div>
                </div>

                <div class="row">
                  <div class="file-field input-field col s12">
                    <div class="btn gflores">
                      <span>Imagen peque&ntilde;a (320x80px)</span>
                      <input type="file" id="imagenS" name="imagens">
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text">
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="file-field input-field col s12">
                    <div class="btn gflores">
                      <span>Imagen Grande (600x80px)</span>
                      <input type="file" id="imagenL" name="imagenl">
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text">
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="input-field col s12">
                    <input id="enlace" type="url" class="validate" name="url">
                    <label for="enlace">Enlace</label>
                  </div>
                </div>

              </form>
            </div>

          </p>
        </div>
        <div class="modal-footer">
          <span class="gflores-text" style="text-align:center;font-size:18px;display:none;" id="newAdsError">El formulario contiene errores.</span>
          <a href="#!" class=" waves-effect waves-light btn btn-custom-color1" style="margin-left:10px;" id="btnGuardarAds">Guardar</a>
          <a href="#!" class="modal-action modal-close waves-effect waves-light btn btn-custom-color1" id="cancelAddAds">Cancelar</a>
        </div>
      </div>

      <!--MODAL CONFIM DELETE-->
      <div id="deleteModal" class="modal" style="max-width:320px;">
        <div class="modal-content">
          <h5 style="text-align:center">Eliminar</h5>
          <p style="text-align:center">&iquest;Desea eliminar esta publicidad?</p>
        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-action modal-close waves-effect waves-light btn-flat" id="confirmDeleteAds">Si</a>
          <a href="#!" class="modal-action modal-close waves-effect waves-light btn btn-custom-color1" style="margin-right:10px;">No</a>
        </div>
      </div>

      <!--MODAL GLOBAL-->
      <div id="globalModal" class="modal" style="max-width:320px;">
        <div class="modal-content">
          <h5 style="text-align:center" id="modalTitle"></h5>
          <p style="text-align:center" id="modalMsg"></p>
        </div>
        <div class="modal-footer">
          <a href="#!" class=" modal-action modal-close waves-effect waves-light btn btn-custom-color1" style="back">Ok</a>
        </div>
      </div>

      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="js/jquery-2.2.0.min.js"></script>
      <script type="text/javascript" src="js/materialize.min.js"></script>
      <script type="text/javascript" src="js/config.js"></script>
      <script type="text/javascript">
      $(document).ready(function(){
        var idDelete = -1;
        $(".button-collapse").sideNav();
        $("#addAds").click(function(){
          $("#newAds").openModal();
        });

        $("#btnGuardarAds").click(function(){
          var error = 0;
          if($("#description").val().length<1){
            error++;
          }

          if($("#imagenS").val().split('.').pop() !== "jpg" && $("#imagenS").val().split('.').pop() !== "jpeg" && $("#imagenS").val().split('.').pop() !== "JPG" && $("#imagenS").val().split('.').pop() !== "JPEG") {
            error++;
          }

          if($("#imagenL").val().split('.').pop() !== "jpg" && $("#imagenL").val().split('.').pop() !== "jpeg" && $("#imagenL").val().split('.').pop() !== "JPG" && $("#imagenL").val().split('.').pop() !== "JPEG") {
            error++;
          }

          if($("#enlace").val().length<1){
            error++;
          }

          if(error>0){
            $("#newAdsError").show(0)
          } else {
            $("#newAdsForm").submit();
          }

        });

        $("input").focus(function(){
          $("#newAdsError").hide(0);
          $("#editAdsError").hide(0);
        });

        $(".deleteAds").click(function(){
          idDelete = $(this).attr("item-id");
          $("#deleteModal").openModal();
        });

        $("#confirmDeleteAds").click(function(){
          $("#deleteAdsForm"+idDelete).submit();
        });

        $(".btnEditAds").click(function(){
          var edit = $(this).attr("edit-id");
          $("#editadsid").val(edit);
          $("#descriptionedit").val($("#editDescription"+edit).html());
          $("#enlaceedit").val($("#editUrl"+edit).html());
          $("#editAds").openModal();
        });

        $("#btnGuardarAdsEdit").click(function(){
            var error = 0;
            if($("#descriptionedit").val().length<1){
              error++;
            }
            if( $("#imagensedit").val().length > 0 ){
              if( ($("#imagensedit").val().split('.').pop() !== "jpg" && $("#imagensedit").val().split('.').pop() !== "jpeg" && $("#imagensedit").val().split('.').pop() !== "JPG" && $("#imagensedit").val().split('.').pop() !== "JPEG") ) {
                error++;
              }
            }

            if( $("#imagenledit").val().length > 0 ){
              if( ($("#imagenledit").val().split('.').pop() !== "jpg" && $("#imagenledit").val().split('.').pop() !== "jpeg" && $("#imagenledit").val().split('.').pop() !== "JPG" && $("#imagenledit").val().split('.').pop() !== "JPEG") ) {
                error++;
              }
            }

            if($("#enlaceedit").val().length<1){
              error++;
            }

            if(error===0){
              $("#editAdsForm").submit();
            } else {
              $("#editAdsError").show();
            }
          });

        @@SCRIPT@@
      });

        function showMessage(title, msg){
          $("#modalTitle").html(title);
          $("#modalMsg").html(msg);
          $("#globalModal").openModal();
        }
      </script>
    </body>
  </html>